# Valores de producción para Red Hat Build of Keycloak
helpers:
  operator:
    enabled: true
    operators:
      rhbk-operator:
        enabled: true
        syncwave: 0
        namespace:
          name: openshift-operators-redhat
        subscription:
          channel: stable
          operatorName: rhbk-operator
          source: redhat-operators
  statusChecker:
    enabled: true

operator:
  defaultNamespace: "rhbk-operator"

keycloak:
  instances: 2  # Producción
  
  database:
    vendor: postgres
    host: keycloak-postgresql
    port: 5432
    database: keycloak
    username: keycloak
    
  http:
    tlsSecret: keycloak-tls
    
  hostname:
    hostname: keycloak.apps.your-cluster.com
    admin: keycloak-admin.apps.your-cluster.com
    strict: false
    
  resources:
    requests:
      memory: 512Mi
      cpu: 500m
    limits:
      memory: 2Gi
      cpu: 2000m

  config:
    KC_LOG_LEVEL: INFO
    KC_DB: postgres
    KC_HEALTH_ENABLED: "true"
    KC_METRICS_ENABLED: "true"
    KC_PROXY: edge
    KC_HOSTNAME_STRICT_HTTPS: "true"
    KC_CACHE: ispn
    KC_CACHE_STACK: kubernetes

postgresql:
  enabled: true
  auth:
    postgresPassword: postgres
    database: keycloak
    username: keycloak
  primary:
    persistence:
      enabled: true
      size: 10Gi
      
realms:
  - name: demojam
    displayName: "DemoJam 2026"
    enabled: true
    loginTheme: keycloak
    
clients:
  - clientId: backstage
    name: "Backstage"
    protocol: openid-connect
    publicClient: false
    standardFlowEnabled: true
    directAccessGrantsEnabled: true
    rootUrl: https://backstage.apps.your-cluster.com
    baseUrl: /
    redirectUris:
      - https://backstage.apps.your-cluster.com/*
    webOrigins:
      - https://backstage.apps.your-cluster.com